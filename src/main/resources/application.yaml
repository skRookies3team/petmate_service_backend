spring:
  config:
    import: "optional:file:.env[.properties]"

  application:
    name: petmate-service

  # PostgreSQL 설정
  datasource:
    url: "${DB_URL}"
    username: "${DB_USERNAME}"
    password: "${DB_PASSWORD}"
    driverClassName: org.postgresql.Driver

  jpa:
    hibernate:
      # [중요] create: 시작 시 기존 테이블 삭제 후 재생성 (데이터 초기화됨)
      # update: 스키마만 변경 (데이터 유지)
      ddl-auto: create
    show-sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    properties:
      hibernate:
        format_sql: true

  # MongoDB 설정
  data:
    mongodb:
      uri: "${MONGO_URI}"

  # MSA Feign Client 설정
  cloud:
    openfeign:
      client:
        config:
          default:
            connectTimeout: 5000
            readTimeout: 5000
          # Storage Service가 없을 때 에러 방지용
          storage-service:
            enabled: false

server:
  port: 8089
  # [삭제됨] server.servlet.context-path: /api
  # 이유: Controller에 이미 /api가 붙어있어서 이중 경로(/api/api/...)로 인한 404 에러 방지

# === 외부 서비스 URL 설정 ===
# Gateway(8000)를 바라보도록 설정
external:
  user-service:
    url: ${USER_SERVICE_URL:http://localhost:8000}
  pet-service:
    url: ${PET_SERVICE_URL:http://localhost:8000}
  notification-service:
    url: ${NOTIFICATION_SERVICE_URL:http://localhost:8083}
  storage-service:
    url: ${STORAGE_SERVICE_URL:http://localhost:8084}

# Kakao API 설정
kakao:
  rest-api-key: ${KAKAO_REST_API_KEY:YOUR_KAKAO_KEY}

# Swagger 설정
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui/index.html